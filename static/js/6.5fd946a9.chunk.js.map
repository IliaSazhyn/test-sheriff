{"version":3,"sources":["store/actions/loginAction.js","components/Login/Login.js"],"names":["getUser","user","dispatch","a","type","USER_LOGIN","payload","e","USER_ERROR","console","log","clearUser","USER_LOGOUT","Login","useState","isAuth","setIsAuth","setUser","error","setError","password","setPassword","history","useHistory","useDispatch","useEffect","localStorage","setItem","JSON","stringify","push","storedUser","parse","getItem","storedAuth","fluid","onSubmit","preventDefault","Row","className","Group","as","Col","xs","sm","Label","Control","placeholder","id","name","onChange","target","value","Text","variant"],"mappings":"4NAEaA,EAAU,SAACC,GAAD,8CAAU,WAAOC,GAAP,SAAAC,EAAA,sDAC/B,IACED,EAAS,CACPE,KAAMC,IACNC,QAASL,IAEX,MAAOM,GACPL,EAAS,CACPE,KAAMI,IACNF,QAASG,QAAQC,IAAIH,KATM,2CAAV,uDAcVI,EAAY,kBAAM,SAACT,GAC9BA,EAAS,CACPE,KAAMQ,S,wHCqEKC,UAjFD,WACZ,MAA4BC,oBAAS,GAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAwBF,mBAAS,IAAjC,mBAAOb,EAAP,KAAagB,EAAb,KACA,EAA0BH,oBAAS,GAAnC,mBAAOI,EAAP,KAAcC,EAAd,KACA,EAAgCL,mBAAS,IAAzC,mBAAOM,EAAP,KAAiBC,EAAjB,KACIC,EAAUC,cACRrB,EAAWsB,cAEjBC,qBAAU,WACJV,GACFb,EAASF,YAAQC,MAElB,CAACC,EAAUa,EAAQd,IAiCtB,OAhBAwB,qBAAU,WACJV,IACFW,aAAaC,QAAQ,OAAQC,KAAKC,UAAU5B,IAC5CyB,aAAaC,QAAQ,eAAgBC,KAAKC,UAAUd,IACpDO,EAAQQ,KAAK,eAEd,CAAC7B,EAAMc,EAAQO,IAClBG,qBAAU,WACR,IAAIM,EAAaH,KAAKI,MAAMN,aAAaO,QAAQ,SACjDhB,EAAQc,KACP,IACHN,qBAAU,WACR,IAAIS,EAAaN,KAAKI,MAAMN,aAAaO,QAAQ,iBACjDjB,EAAUkB,KACT,IAGD,cAAC,IAAD,CAAWC,OAAK,EAAhB,SACE,eAAC,IAAD,CAAMC,SAjCW,SAAC7B,GACpBA,EAAE8B,iBACe,UAAbjB,GAAiC,UAATnB,EAC1Be,GAAU,GAEVG,GAAS,IA4BT,UACE,cAAC,IAAKmB,IAAN,CAAUC,UAAU,0BAApB,SACE,eAAC,IAAKC,MAAN,CAAYC,GAAIC,IAAKC,GAAG,KAAKC,GAAG,OAAhC,UACE,cAAC,IAAKC,MAAN,6CACA,cAAC,IAAKC,QAAN,CACEC,YAAY,gEACZC,GAAG,WACH5C,KAAK,OACL6C,KAAK,WACLC,SAlCQ,SAAC3C,GACnBU,EAAQV,EAAE4C,OAAOC,UAmCT,cAAC,IAAKP,MAAN,mDACA,cAAC,IAAKC,QAAN,CACEC,YAAY,kFACZC,GAAG,WACH5C,KAAK,OACL6C,KAAK,WACLC,SAvCW,SAAC3C,GACtBc,EAAYd,EAAE4C,OAAOC,UAwCZlC,GACC,cAAC,IAAKmC,KAAN,CAAWd,UAAU,aAArB,4PAMN,cAAC,IAAD,CAAQe,QAAQ,UAAUlD,KAAK,SAA/B","file":"static/js/6.5fd946a9.chunk.js","sourcesContent":["import { USER_LOGIN, USER_LOGOUT, USER_ERROR } from \"../types\";\r\n\r\nexport const getUser = (user) => async (dispatch) => {\r\n  try {\r\n    dispatch({\r\n      type: USER_LOGIN,\r\n      payload: user,\r\n    });\r\n  } catch (e) {\r\n    dispatch({\r\n      type: USER_ERROR,\r\n      payload: console.log(e),\r\n    });\r\n  }\r\n};\r\n\r\nexport const clearUser = () => (dispatch) => {\r\n  dispatch({\r\n    type: USER_LOGOUT,\r\n  });\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getUser } from \"../../store/actions/loginAction\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Form, Button, Container, Col } from \"react-bootstrap\";\r\n\r\nconst Login = () => {\r\n  const [isAuth, setIsAuth] = useState(false);\r\n  const [user, setUser] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [password, setPassword] = useState(\"\");\r\n  let history = useHistory();\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (isAuth) {\r\n      dispatch(getUser(user));\r\n    }\r\n  }, [dispatch, isAuth, user]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (password === \"12345\" && user === \"admin\") {\r\n      setIsAuth(true);\r\n    } else {\r\n      setError(true);\r\n    }\r\n  };\r\n  const handleLogin = (e) => {\r\n    setUser(e.target.value);\r\n  };\r\n  const handlePassword = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isAuth) {\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      localStorage.setItem(\"authenticate\", JSON.stringify(isAuth));\r\n      history.push(\"/profile\");\r\n    }\r\n  }, [user, isAuth, history]);\r\n  useEffect(() => {\r\n    let storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    setUser(storedUser);\r\n  }, []);\r\n  useEffect(() => {\r\n    let storedAuth = JSON.parse(localStorage.getItem(\"authenticate\"));\r\n    setIsAuth(storedAuth);\r\n  }, []);\r\n\r\n  return (\r\n    <Container fluid>\r\n      <Form onSubmit={handleSubmit}>\r\n        <Form.Row className=\"align-items-center mt-4\">\r\n          <Form.Group as={Col} xs=\"12\" sm=\"auto\">\r\n            <Form.Label>Логин</Form.Label>\r\n            <Form.Control\r\n              placeholder=\"Введите имя\"\r\n              id=\"username\"\r\n              type=\"text\"\r\n              name=\"username\"\r\n              onChange={handleLogin}\r\n            />\r\n            <Form.Label>Пароль</Form.Label>\r\n            <Form.Control\r\n              placeholder=\"Введите пароль\"\r\n              id=\"password\"\r\n              type=\"text\"\r\n              name=\"password\"\r\n              onChange={handlePassword}\r\n            />\r\n            {error && (\r\n              <Form.Text className=\"text-muted\">\r\n                Имя пользователя или пароль введены неверно\r\n              </Form.Text>\r\n            )}\r\n          </Form.Group>\r\n        </Form.Row>\r\n        <Button variant=\"primary\" type=\"submit\">\r\n          Войти\r\n        </Button>\r\n      </Form>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"sourceRoot":""}